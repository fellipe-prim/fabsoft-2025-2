<div class="page-container py-5" *ngIf="filme"> <!-- Só mostra se o filme carregou -->
    <div class="container">

        <!-- Botão Voltar -->
        <a routerLink="/" class="btn btn-link text-decoration-none text-secondary ps-0 mb-4">
            <i class="bi bi-arrow-left"></i> Voltar para Home
        </a>

        <div class="row gx-5">
            <!-- Coluna da Esquerda: Pôster -->
            <div class="col-md-4 mb-4">
                <div class="poster-wrapper shadow-sm rounded-4 overflow-hidden bg-light">
                    <img [src]="filme.imagemURL || 'assets/placeholder.jpg'" 
                         alt="{{ filme.titulo }}" 
                         class="img-fluid w-100">
                </div>
            </div>

            <!-- Coluna da Direita: Informações -->
            <div class="col-md-8">
                
                <!-- ÁREA DE TAGS (Classificação + Gênero) -->
                <div class="mb-3">
                    <!-- Badge Classificação (Colorido) -->
                    <span class="badge me-2 border" [ngClass]="getCorClassificacao(filme.classificacao)">
                        {{ filme.classificacao || 'N/A' }}
                    </span>

                    <!-- Badge Gênero -->
                    <span class="badge bg-light text-dark border">{{ filme.genero }}</span>
                </div>

                <h1 class="display-4 fw-bold text-dark mb-3">{{ filme.titulo }}</h1>

                <!-- Informações Técnicas -->
                <div class="mb-4">
                    <span class="text-muted fs-5">
                        <i class="bi bi-clock me-1"></i>
                        {{ filme.horas || 0 }}h {{ filme.minutos || 0 }}m
                    </span>
                </div>

                <div class="mb-5">
                    <h5 class="text-uppercase text-secondary small fw-bold tracking-wide mb-3">Sinopse</h5>
                    <p class="lead fs-6 text-dark opacity-75" style="line-height: 1.8;">
                        {{ filme.sinopse }}
                    </p>
                </div>

                <!-- Seção de Sessões -->
                <div class="sessao-area p-4 rounded-3 border border-secondary mt-5" style="background-color: #1f1f1f;">
                    <h5 class="fw-bold mb-3 text-white">Horários Disponíveis</h5>

                    <p *ngIf="sessoes.length === 0" class="text-muted small">
                        Nenhuma sessão disponível para este filme.
                    </p>

                    <div class="d-flex flex-wrap gap-2">
                        <button *ngFor="let sessao of sessoes" 
                                [routerLink]="['/sessao', sessao.id]"
                                class="btn btn-outline-light px-4 py-2 text-center" 
                                style="min-width: 100px;">

                            <!-- Hora formatada do Array Java -->
                            <div class="fw-bold fs-5">
                                {{ sessao.dataHora[3] | number:'2.0-0' }}:{{ sessao.dataHora[4] | number:'2.0-0' }}
                            </div>

                            <small class="text-white-50 d-block" style="font-size: 0.7rem;">
                                Sala {{ sessao.sala.id }}
                            </small>

                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Tela de Carregando -->
<div *ngIf="!filme" class="container py-5 text-center">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3 text-muted">Carregando detalhes do filme...</p>
    <a routerLink="/" class="btn btn-sm btn-outline-secondary mt-2">Voltar</a>
</div>